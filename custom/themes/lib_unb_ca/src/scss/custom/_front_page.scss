.header-front {
  background-attachment: fixed;
  background-repeat: no-repeat;
  background-position: center top;
  background-size: cover;

  #navbar-top {
    background-color: initial;
    background-image: linear-gradient(180deg, rgb(27  33  37 / 100%), rgb(27  33  37 / 95%));
    font-size: .9rem;
    font-weight: bold;

    a.nav-link {
      line-height: normal;
    }
  }
  #navbar-main:not(.affix) {
    #navbar-main-content {
      @include css3-prefix(transition, background-color .35s ease-in);
      border-left: 1px solid transparent;
      border-right: 1px solid transparent;
      padding-bottom: 1px;
    }

    &:hover {
      #navbar-main-content {
        background-color: rgb(55 63 68 / 99%);
      }
    }

    .branding h1 {
      min-width: auto;
    }

    #navbar {
      flex-basis: auto;

      ul[role="menubar"] {
        a[aria-haspopup="true"] {
          color: $white;
        }

        .show a[aria-haspopup="true"] {
          @media (min-width: 991px) {
            background-color: rgb(52 58 64);
          }

          &:not(.focus-ring) {
            @include css3-prefix(box-shadow, 0 3px 0 -1px rgb(52 58 64))
          }

          &:focus,
          &:hover {
            cursor: default;
          }
        }
      }
    }
  }

  .megamenu {
    border: none;
    border-radius: 0;

    .container {
      background: rgb(55 63 68);
      border-bottom: 3px ridge $dark;
    }
    &.multi-row {
      .container:first-child {
        border-bottom-width: 1px;
      }
    }
  }

  #header-overlay {
    background-image: linear-gradient(180deg, rgb(27 33 37 / 89%), rgb(27  33  37 / 1%));
  }

  #discovery-wrapper {
    min-height: 50vh;
  }
  #banner {
    table {
      border-collapse: initial;
      padding-bottom: 1rem;
    }
  }

  @media (min-width: 992px) {
    .megamenu {
      @include css3-prefix(transition, all .35s ease-in);
      background: none;
      display: initial;
      opacity: 0;
      visibility: hidden;

      &.show {
        opacity: 1;
        visibility: visible;
      }
    }
  }

  #navbar-main:not(.affix) .navbar-nav li.show>button {
    color: $navbar-dark-hover;
    background: #343c41;
    background-image: none;
    border-bottom-color: $header-hover-color;
  }

  .card {
    color: $white;

    a:not(.chosen-single),
    .custom-control-label {
      color: $white;
      padding: 1px;

      &:focus ,
      &:hover {
        color: $text-yellow;
      }
    }
  }
  .card-header {
    background-color: initial;
  }
  .form-control:placeholder-shown {
    opacity: 1;
  }

  /* OVERRIDE */
  .navbar-nav a {
    @include css3-prefix(transition, all .15s ease-out)
  }

  /* OVERRIDE - to do: remove original affix */
  .affix {
    transition: none;
  }
  #header .affix li.show > .nav-link,
  #header .affix .megamenu-li > .nav-link:focus,
  #header .affix .megamenu-li > .nav-link:hover,
  .affix .branding a:focus,
  .affix .branding a:hover {
    border-bottom-color: $white;
  }
  .megamenu-li button.nav-link {
    @include css3-prefix(transition, all .3s ease-in-out);
    background: none;
    border-top: none;
    border-right: none;
    border-left: none;
    color: $white;
    height: 100%;
    margin: 0;
    text-align: left;
    width: 100%;

    &.focus-ring:focus {
      outline: 1px dotted $white;
    }

    &:hover {
      color: $gray-200;
    }

    span.text-nowrap {
      &:after {
        @media (min-width: 992px) {
          content: '';
          display: block;
        }
      }
    }
  }

  button[data-target="#navbar"][aria-expanded="false"]:after {
    @include link-fa-icon('\f0c9', left);
  }

  button[data-target="#navbar"][aria-expanded="true"]:after {
    @include link-fa-icon('\f00d', left);
    margin-left: 0.44rem;
  }

  button[data-target="#quicklinks-wrapper"][aria-expanded="false"]:after {
    @include link-fa-icon('\f011', left, '', $text-muted);
  }

  button[data-target="#quicklinks-wrapper"][aria-expanded="true"]:after {
    @include link-fa-icon('\f011', left, '', $white);
  }

  @media (max-width: 991px) {
    #navbar-main #navbar {
      button {
        font-size: 1.3rem;

        &:after {
          float: right;
          font-family: "Font Awesome 5 Free";
          font-weight: 900;
        }

        &[aria-expanded="false"] {
          &:after {
            content: "\f078"
          }
        }

        &[aria-expanded="true"] {
          &:after {
            content: "\f077"
          }
        }
      }

      li.show>button {
        background: rgb(55 63 68 / 30%)!important;
      }

      div.dropdown-menu {
        display: none;

        &.show {
          display: flex;

          .container > div {
            -webkit-animation: megamenu-expand 0.3s;
            animation-duration: 0.35s;
            animation-iteration-count: 1;
            animation-name: megamenu-expand;

            ul {
              margin-bottom: .5em;
            }
          }
        }
      }
    }
  }
}

.layout--twocol-section .layout__region > div {
  padding-bottom: $twocol-padding-size;
}

.front-page-border {
  border: 1px solid $secondary;

  &.image-collapse {
    @media (max-width: 991px) {
      display: inline-block;
    }
  }

  /* Borrow/override old Featured news image */
  a img {
    @include opacity(1);
    @include css3-prefix(transition, opacity .3s);
  }
  a:hover img {
    @include opacity(.75);
  }
}
.news-feature {
  @media (min-width: 991px) and (max-width: 1200px) {
    img {
      padding-left: 1rem;
    }
  }
}

.path-frontpage {
  /* Library News Overrides */
  .library-news {
    .more-link {
      &:before {
        content: '';
        font-family: inherit;
        margin: 0;
      }
    }
  }

  /* Videos & Tutorials Overrides */
  .views_slideshow_cycle_teaser_section {
    border: none;
  }

  @media (min-width: 992px) {
    .layout__region--first {
      border-right: 1px solid #ddd;
      padding-right: 2.5rem;
      padding-bottom: 3.5rem;
    }
    .layout__region--second {
      padding-left: 2.5rem;
      padding-bottom: 3.5rem;
    }
  }
  .navbar-expand-lg .navbar-nav .nav-link {
    padding-left: 0;
    padding-right: 0;
  }
}
.megamenu {
  .fa-ul {
    margin-left: 1em;

    li {
      margin-bottom: .5rem;

      .fa-li {
        color: $unb-red;
        left: -1em;
        opacity: .95;
        width: .8rem;
        font-size: 0.8rem;
        margin-top: .1rem;
        padding-right: .2rem;
      }
      a {
        line-height: 1.4rem;

        &:before {
          content: none;
        }
      }
    }
  }
}

/* Page template Footer Overrides */
.site-footer>div {
  a.nav-link {
    &:hover {
      background: $dark;
    }
  }

  &:not(.footer-middle) a.nav-link {
    &:after {
      opacity: 0.9;
    }
  }

  &.footer-top {
    @include css3-prefix(transition, all .35s ease-in);

    ul {
      margin-left: 0;
    }
  }

  &.footer-middle {
    a {
      margin-left: 0;
    }
  }

  &.footer-bottom a.nav-link {
    &:hover {
      background: #272B2F;
    }
  }
}

/* Reduce visual bleed of megemenu and discovery search */
#navbar-main + #discovery-wrapper > .container {
  @include css3-prefix(transition, opacity .35s ease-in);
  opacity: 1;
}
#navbar-main:focus-within #navbar-main-content {
  background-color: rgb(55 63 68 / 99%);
}
#navbar-main:focus-within + #discovery-wrapper> .container,
#navbar-main:hover + #discovery-wrapper> .container {
  opacity: .5;
}