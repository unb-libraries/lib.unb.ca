/* Import Sass files */
@import 'import';

/** OVERRIDES **/
/* ELEMENTS */
/* Nav affix anchor offset */
a:target:before,
h2:target:before {
  content: "\00a0";
  display: block;
  height: 156px;
  margin-top: -156px;
  visibility: hidden;
}
a {
  &.email-icon {
    &:before {
      @include link-icon('\f0e0','',right);
    }
  }
}

/* Link hover effect (not in button/chosen/nav contexts) */
#main {
  a:not(.link-no-hover):not(.btn):not(.button):not(.chosen-single):not(.dropdown-item):not(.nav-link):not(.page-link) {
    padding-bottom: 1px;

    &:hover {
      @include css3-prefix(box-shadow, 0px 2px 1px -1px rgba(153, 0, 0, .2));
    }
  }
}
/* Link hover exceptions: back-to-top/featured news/dark table header */
#back-top a:hover {
  box-shadow: none;
}
.news-featured a:hover {
  box-shadow: none !important;
}
.thead-dark {
  a:hover {
    @include css3-prefix(box-shadow, 0px 2px 1px -1px rgba(255, 193, 7, .3) !important);
  }
}

caption {
  caption-side: top;
  color: $black;
}
dd {
  margin-left: 1.5rem;
}
dt:nth-of-type(n+1) {
  margin-top: 1.25rem;
}
h1 {
  font-size: 2rem;
  margin-bottom: 1rem;
}
h2 {
  color: $red;
  font-size: 1.5rem;
  margin-bottom: 1rem;
}
header h2 {
  border-bottom: 1px solid $gray-light;
  margin-bottom: .5rem;
  padding-bottom:.25rem;
}
h3 {
  font-size: 1.1rem;
}

/* Table header sort icon */
thead {
  th[scope="col"] {
    a {
      &:before {
        content: '\f362';
        display: inline-block;
        font-family: "Font Awesome 5 Free";
        font-size: .8rem;
        font-weight: 900;
        margin-bottom: 2px;
        margin-right: .25rem;
        transform: rotate(90deg);
      }
    }
  }
}
/* END Elements */

/* ID */
#block-breadcrumbs {
  margin-bottom: 2rem;
}

/* CLASS */
.aggregation {
  margin-left: .25rem;
}

.more-link a {
  color: $red;
}

/* Drupal alert messages */
.alert-dismissible {
  .close {
    background: rgba(128, 128, 128, .1);
    @include opacity(.8);
  }
}

/* BS4 alerts */
.alert-primary {
  a {
    .alert-link {
      @include css3-prefix(transition, all .3s);
      border-bottom: 1px dotted #004085;
      padding-bottom: 1px;
    }
    &:hover {
      .alert-link {
        border-color: transparent;
        color: inherit;
      }
    }
  }
}
/* BS4 Dropdown */
.dropdown-item:hover {
  text-decoration: underline;
}

/* Embedded Media Image - centered */
.align-center {
  text-align: center;
}

/* CONTEXT sensitive */
/* Scale content images to parent block element */
.block img {
  height: auto;
  max-width: 100%;
}
/* Discovery/e-Resources Search */
@media (min-width: 992px) and (max-width: 1200px) {
  #discovery-search .card-body {
    max-width: 538px;
  }
}
/* END Discovery/eResources Search */

/* Breadcrumbs */
.breadcrumb {
  font-size: 1rem;

  a[href="/"] {
    display: inline-block;
    position: relative;
    right: 9999px;
    width: 1rem;

    &:after {
      font-family: "Font Awesome 5 Free";
      content: "\f015";
      font-size: .85rem;
      font-weight: 900;
      height: 100%;
      position: absolute;
      right: -9999px;
      top: 0;
    }
  }

  li {
    margin-bottom: 0;
  }
}
/* END Breadcrumbs */

/* Media files/attachments */
a:not(.link-no-icon) {
  &[href$=".doc"]:after,
  &[href$=".docx"]:after {
    @include link-icon("\f1c2", #2b5999);
  }

  &[href$=".pdf"]:after {
    @include link-icon("\f1c1", #a40607);
  }

  &[href$=".ppt"]:after,
  &[href$=".pptx"]:after {
    @include link-icon("\f1c4", #e86900);
  }

  &[href$=".rtf"]:after,
  &[href$=".txt"]:after {
    @include link-icon("\f15b", #373f44);
  }

  &[href$=".csv"]:after,
  &[href$=".xls"]:after,
  &[href$=".xlsx"]:after {
    @include link-icon("\f1c3", #206f43);
  }

  &[href$=".zip"]:after {
    @include link-icon("\f1c6", #eabf0d);
  }
}
/* End Media files */

/* Pagination */
ul.pagination {
  justify-content: center !important;
  margin-top: 1.5rem;
}
.page-item {
  a.page-link {
    color: $link-color;

    &:focus,
    &:hover {
      color: $red;
    }
  }

  span.page-link {
    color: $black;
    cursor: default;

    &:hover {
      background: inherit;
    }
  }
}
/* END Pagination */

/* Library News */
/* Post listing page */
.library-news {
  /* Library news listing page */
  .library-news {
    span.page-link {
      background: inherit;
      color: $gray-dark;
      &:hover {
        cursor: default;
      }
    }
  }

  .more-link {
    &:before {
      color: $gray-dark;
      content: '\f1ea';
      font-family: "Font Awesome 5 Free";
      font-weight: 900;
      margin-left: -1em;
      margin-right: .25em;
    }
  }

  /* Front page teasers */
  .recent-teasers {
    .views-row h3 {
      margin-bottom: 0;
    }
  }

  /* Separate views list items */
  .view-content div:not(:first-child) article {
    margin-top: 3rem;
  }

  span.page-link {
    background: inherit;
    color: $gray-dark;
    &:hover {
      cursor: default;
    }
  }

  @media (max-width: 1200px) {
    nav {
      margin-bottom: 3rem;
    }
  }
}
/* Featured image */
.news-featured {
  a img {
    @include opacity(1);
    @include css3-prefix(transition, opacity .8s);
  }
  a:hover img {
    @include opacity(.75);
  }

  @media (min-width: 991px) and (max-width: 1200px) {
    img {
      padding-left: 1rem;
    }
  }
}
/* Library new post metadata */
.attribution,
.field--name-field-categories {
  color: $gray-600;
  @include css3-value-prefix(display, box);
  font-size: .9rem;

  .list-inline-item:not(:last-child) {
    margin-bottom: .2rem;
  }

  &:before {
    display: inherit;
    font-family: "Font Awesome 5 Free";
    font-size: .8rem;
    font-weight: 900;
    margin-right: .45rem;
    vertical-align: top;
    width: .8rem
  }
}
/* News categories tags icon */
ul.field--name-field-categories:before {
  content: '\f02c';
}
/* Library news post */
.node--type-news-post .paragraph {
  margin-top: 1.5rem;
}
.news-metadata {
  padding-right: 1.5rem;
  position: relative;

  .attribution {
    margin-right: 1rem;

    &:before {
      content: '\f783';
    }
  }

  .badge {
    position: absolute;
    right: 0;
    top: 0;
  }
  .badge-stickied {
    color: $nav-red;
    font-size: 95%;
    vertical-align: text-top;
  }
}

/* Sidebar archive block */
.news-archive {
  .item-list ul {
    list-style: initial;
    padding-left: 40px;
  }

  .more-link {
    font-size: .95rem;
    text-align: right;

    &:before {
      color: $gray-dark;
      content: '\f0fe';
      font-family: "Font Awesome 5 Free";
      font-weight: 900;
      margin-right: .25rem;
      vertical-align: top;
    }

    a {
      color: $nav-red;
    }
  }
}
/* END Library News */

/** Search Webpages **/
.search-webpages {
  form {
    margin: 3rem 2.5rem;

    .form-group {
      margin-bottom: .5rem;
    }

    .form-select {
      /* Match stock form-text margin top */
      margin-top: 0.25rem;
    }

    .js-form-item-query {
      /* Emulate BS4 input-group-prepend with FA search */
      padding-left: 45px;
      position: relative;

      &:before {
        background-color: #e9ecef;
        border: 1px solid #ced4da;
        border-bottom-left-radius: .25rem;
        border-top-left-radius: .25rem;
        color: #495057;
        content: '\f002';
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
        /* Match form margin */
        left: 0;
        margin-left: 5px;
        margin-top: .25rem;
        padding: 0.375rem 0.75rem;
        position: absolute;
        white-space: nowrap;
        z-index: -1;
      }

      input {
        border-bottom-left-ra43dius: 0;
        border-top-left-radius: 0;
      }
    }

    label {
      /* Emulate BS4 sr-only: label accessibility */
      border: 0;
      clip: rect(0, 0, 0, 0);
      height: 1px;
      margin: -1px;
      overflow: hidden;
      padding: 0;
      position: absolute;
      width: 1px;
    }
  }

  /* Emulate BS4 input-group-lg */
  &.input-group-lg {
    input,
    select {
      font-size: 1.25rem;
      line-height: initial;
      padding-left: .75rem;
      padding-right: .75rem;
    }

    .js-form-item-query {
      &:before {
        font-size: 1.25rem;
        margin-left: -0.4rem;
        padding: .38rem 1rem;
      }

      input {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
      }
    }
  }

  @media (max-width: 414px) {
    form {
      margin: 3rem 1rem;
    }
  }
}

/* Remove autocomplete li hover */
.search-api-autocomplete-search .ui-menu-item:hover {
  background: inherit;
}

/* Borrow BS4 widget styles */
.ui-autocomplete {
  &.ui-widget.ui-widget-content {
    border-color: #ced4da;
  }

  background: #f8f9fa;
  border-radius: .25rem;
  padding: .25rem .5rem;

  /* Inject 'Suggested' text at top of autocomplete list */
  li:first-child:before {
    color: #004085;
    border-bottom: 1px solid #ced4da;
    content: 'Suggested matches';
    display: block;
    font-weight: bold;
    letter-spacing: 1px;
    margin-bottom: 0.5rem;
    padding: .25rem;
  }
}
/** END Search Webpages **/

/* Staff and Departments View */
.staff-departments {
  .legend {
    font-size: .9rem;
  }

  label {
    margin-bottom: 0;
  }

  table {
    margin-bottom: 2rem;

    caption {
      font-size: 1.3rem;

      .field-location,
      .field__item:not(:empty) {
        &:before {
          color: $gray-700;
          font-family: "Font Awesome 5 Free";
          font-weight: 900;
          margin-left: 1px;
          margin-right: .25rem;
        }
      }

      .field-fax:not(:empty) {
        &:before {
          content: '\f1ac';
        }
      }

      .field-location {
        color: $gray-700;
        font-weight: bold;
      }

      .field-telephone:not(:empty) {
        &:before {
          content: '\f3cd'
        }
      }
      .field-website:not(:empty) {
        &:before {
          content: '\f0c1';
        }
      }
      .metadata {
        font-size: .9rem;
      }
    }

    tbody {
      td {
        width: 25%;

        &:first-child {
          width: 40%;
        }

        &:last-child {
          width: 15%;
        }

        .head {
          color: $red;
        }
      }
    }

    thead {
      th {
        color: $white;

        a {
          display: flex;
        }
      }
    }
  }
}
/* END Staff and Departments View */

/* Views Slideshow */
.views_slideshow_cycle_teaser_section {
  a img {
    @include opacity(1);
    @include css3-prefix(transition, opacity .8s);
  }
  a:hover {
    img {
      @include opacity(.75);
    }
  }
}
.views-slideshow-controls-bottom {
  font-size: 0.9rem;
  margin-top: .75rem;

  .views_slideshow_controls_text {
    text-align: center;

    span {
      margin-right: 1rem;

      &:hover {
        text-decoration: none;
      }
    }
  }

  span[id^="views_slideshow_controls_text_previous"],
  span[id^="views_slideshow_controls_text_pause"],
  span[id^="views_slideshow_controls_text_next"] {
    & > a {
      display: inline-block;
      position: relative;
      right: 9999px;
      width: 1rem;

      &:after {
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
        height: 100%;
        position: absolute;
        right: -9999px;
        top: 0;
      }
    }
  }
  span[id^="views_slideshow_controls_text_previous"] a:after {
    content: "\f04a";
  }
  span.views-slideshow-controls-text-status-pause a:after {
    content: "\f04b";
  }
  span.views-slideshow-controls-text-status-play a:after {
    content: "\f04c";
  }
  span[id^="views_slideshow_controls_text_next"] a:after {
    content: "\f04e";
  }
}

/* Emulate original background & border */
.views_slideshow_cycle_teaser_section {
  background-color: $gray-100;
  border: 1px solid $gray-light;
}

/* Responsive overrides */
.views_slideshow_cycle_slide,
.views_slideshow_cycle_teaser_section {
  width: 100% !important;
}
@media (max-width: 767px) {
  figcaption {
    .h3 {
      font-size: 1.1rem;
    }

    .h4 {
      font-size: 1rem;
    }
  }
}
/* END Views Slideshow */
/** END OVERRIDES **/


/** UTILITY CLASSES **/
/* Aria-expanded link toggle icons */
a:not(.link-no-icon)[data-toggle="collapse"] {
  &[aria-expanded="false"] {
    &:before {
      @include link-icon('\f13a','',right);
    }
  }

  &[aria-expanded="true"] {
    &:before {
      @include link-icon('\f139','',right);
    }
  }
}

/* Custom List style */
.bg-red,
.list-group-item.active.bg-red {
  background: $red;
  border-color: $red;
}

.card-collapse {
  background-color: $gray-100;
  margin-bottom: 1rem;
  margin-left: 1.5rem;
  margin-right: 1.5rem;
  padding-bottom: 1rem;
  padding-top: 1rem;

  a {
    color: #005C75;
    &:hover {
      color: $red;
    }
  }

  ul {
    margin-bottom: 0;
  }
}

.list-compact {
  li {
    margin-bottom: .25rem;
  }
}
li.list-group-item {
  a {
    display: block;

    &:hover {
      box-shadow: none !important;
      text-decoration: underline;
    }
  }
}
.list-group-item-active {
  border-left: .26em solid $red;

  a {
    color: $red;
    padding-left: .15rem;
  }
}
ol.list-no-bullets,
ul.list-no-bullets {
  list-style-type: none;
  padding-inline-start: 1.5rem;
}
.list-no-indent {
  padding-inline-start: 1.1rem;
}

/* Custom "Hours" table style */
.table-hours {
  margin-left: 1.5rem !important;
  max-width: 520px;

  caption {
    margin-left: -1.5rem;
  }

  th {
    font-weight: normal;
    width: 50%;
  }
}

.text-dark {
  color: $font-dark;
}
.text-muted-wcag {
  color: $text-muted-wcag;
}
.text-red {
  color: $red;
}
.text-yellow {
  color: #ffc107;
}

dl.two-cols {
  display: grid;
  grid-column-gap: 1rem;
  grid-row-gap: 1.5rem;
  grid-template-columns: 1fr 2fr;
}

table {
  /* Consistent table 1st col widths */
  .col-50 {
    tr {
      & > td,
      & > th {
        width: 50% !important;
      }
    }
  }

  /* Increase Barrio stock table font-size */
  .font-size-larger {
    font-size: .95rem;
  }
}
/** END UTILITY **/
